#!/usr/bin/env bash

set -eo pipefail

print_help() {
    echo "About $0: Copies a list of files into the release asset directory"
    echo "Usage: $0  path/to/asset/release/dir"
}

asset_dir="$1"

if [[ ! -d "${asset_dir}" ]]; then
    print_help
fi

goreleaser_dir="pristine-checkout/dist/goreleaser/"

assets=(
    "NOTICES.txt"
    "CHANGELOG.md"
    "${goreleaser_dir}SHA256SUMS.txt"
    "LICENSE"
    "${goreleaser_dir}"*.tar.gz
    "${goreleaser_dir}"*.deb
    "${goreleaser_dir}"*.rpm
    )

for asset in "${assets[@]}"; do
    echo "Copying ${asset} to ${asset_dir}"
    cp "${asset}" "${asset_dir}"
done