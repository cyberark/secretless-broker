#!/bin/bash

# This is a convenience script to start go doc for the secretless-repo

if [[ ! -d ./bin ]]; then
  echo "This script needs to be run from the root of the secretless-broker repo"
  exit
fi

echo "godoc is starting up..."
echo ""
echo "The public Secretless docs will be viewable at:"
echo ""
echo "    http://localhost:6060/pkg/secretless-broker/"
echo ""

docker run \
  --rm --interactive --tty \
  --publish 6060:6060 \
  --volume "$PWD":/go/src/secretless-broker \
  --workdir /go/src/secretless-broker \
  golang:1.12.5-stretch \
    godoc -http=:6060
