listeners:
  - name: http
    address: 0.0.0.0:80

  - name: pg
    socket: ./run/postgresql/.s.PGSQL.5432

handlers:
  - name: conjur
    listener: http
    match:
      - ^http\:\/\/conjur\/
    credentials:
      - name: accessToken
        provider: conjur
        id: accessToken

  - name: aws
    listener: http
    match:
      - ".*"
    credentials:
      - name: accessKeyId
        provider: env
        id: AWS_ACCESS_KEY_ID
      - name: secretAccessKey
        provider: env
        id: AWS_SECRET_ACCESS_KEY

  - name: pg
    listener: pg
    credentials:
      - name: address
        provider: conjur
        id: dev:variable:pg/url
      - name: username
        provider: conjur
        id: dev:variable:pg/username
      - name: password
        provider: conjur
        id: dev:variable:pg/password

