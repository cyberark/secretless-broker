FROM ruby:3.0-slim-buster

RUN apt-get -y update && \
    apt-get -y install build-essential && \
    mkdir -p /tmp/gems

WORKDIR /tmp/gems

COPY Gemfile* /tmp/gems/
RUN bundle install

WORKDIR /usr/src/app

CMD ["jekyll", "build", "--destination", "/tmp/_site"]
